--- SD_26ViewModel.cs
+++ SD_26ViewModel.cs
@@ -3,6 +3,7 @@
 using System.Collections.ObjectModel;
 using System.ComponentModel.DataAnnotations;
 using System.Linq;
+using Core.Helper;
 using Core.ViewModel.Base;
 using Core.ViewModel.Common;
 using Data;
@@ -103,6 +104,12 @@
         private Kontragent myKontragent;
         public Kontragent Kontragent
         {
-            get => myKontragent;
+            get
+            {
+                if (Entity.SF_POST_DC == null) return null;
+                return MainReferences.AllKontragents.ContainsKey(Entity.SF_POST_DC)
+                    ? MainReferences.AllKontragents[Entity.SF_POST_DC]
+                    : null;
+            }
             set
             {
@@ -107,11 +114,8 @@
             set
             {
-                if (myKontragent == value) return;
-                myKontragent = value;
-                if (myKontragent != null)
-                    Entity.SF_POST_DC = myKontragent.DocCode;
-                RaisePropertyChanged(nameof(SF_POST_DC));
-                RaisePropertyChanged();
+                    if (Entity.SF_POST_DC == value.DOC_CODE) return;
+                    Entity.SF_POST_DC = value.DOC_CODE;
+                    RaisePropertyChanged();
             }
         }
 
@@ -155,6 +159,8 @@
         private Currency myCurrency;
         public Currency Currency
         {
-            get => myCurrency;
+            get => !MainReferences.Currencies.ContainsKey(Entity.SF_CRS_DC.Value)
+                ? null
+                : MainReferences.Currencies[Entity.SF_CRS_DC.Value];
             set
             {
@@ -159,10 +165,7 @@
             set
             {
-                if (Equals(myCurrency, value)) return;
-                myCurrency = value;
-                if (myCurrency != null)
-                    Entity.SF_CRS_DC = myCurrency.DocCode;
-                RaisePropertyChanged(nameof(SF_CRS_DC));
+                if (Entity.SF_CRS_DC == value.DOC_CODE) return;
+                Entity.SF_CRS_DC = value.DOC_CODE;
                 RaisePropertyChanged();
             }
         }
@@ -482,7 +485,7 @@
             }
         }
 
-        public int? SF_IN_NUM
+        public int SF_IN_NUM
         {
             get => Entity.SF_IN_NUM;
             set
@@ -1092,5 +1095,5 @@
         }
     }
 
-    public static class SD_26LayoutData_FluentAPI
+    public class SD_26LayoutData_FluentAPI : DataAnnotationForFluentApiBase, IMetadataProvider<SD_26ViewModel>
     {
@@ -1096,3 +1099,3 @@
     {
-        public static void BuildMetadata(MetadataBuilder<SD_26ViewModel> builder)
+        void IMetadataProvider<SD_26ViewModel>.BuildMetadata(MetadataBuilder<SD_26ViewModel> builder)
         {
@@ -1098,19 +1101,4 @@
         {
-            builder.Property(_ => _.DocCode).NotAutoGenerated();
-            builder.Property(_ => _.Id).NotAutoGenerated();
-            //builder.Property(_ => _.State).NotAutoGenerated();
-            builder.Property(_ => _.Note).NotAutoGenerated();
-            builder.Property(_ => _.DOC_CODE).NotAutoGenerated();
-            builder.Property(_ => _.Entity).NotAutoGenerated();
-            builder.Property(_ => _.LoadCondition).NotAutoGenerated();
-            builder.Property(_ => _.ParentDC).NotAutoGenerated();
-            builder.Property(_ => _.ParentDocCode).NotAutoGenerated();
-            builder.Property(_ => _.Parent).NotAutoGenerated();
-            builder.Property(_ => _.StringId).NotAutoGenerated();
-            builder.Property(_ => _.ParentId).NotAutoGenerated();
-            builder.Property(_ => _.Name).NotAutoGenerated();
-            builder.Property(_ => _.SF_POST_DC).NotAutoGenerated();
-
-
-            builder.Property(x => x.Currency)
+            SetNotAutoGenerated(builder);
+            builder.Property(x => x.Currency).AutoGenerated()
                 .DisplayName("Валюта");
@@ -1116,7 +1104,3 @@
                 .DisplayName("Валюта");
-            builder.Property(x => x.SF_OPRIHOD_DATE)
-                .DisplayName("Дата прихода");
-            builder.Property(x => x.SF_POSTAV_NUM)
-                .DisplayName("№ поставщикак");
-            builder.Property(x => x.SF_POSTAV_DATE)
+            builder.Property(x => x.SF_POSTAV_DATE).AutoGenerated()
                 .DisplayName("Дата");
@@ -1122,3 +1106,9 @@
                 .DisplayName("Дата");
-            builder.Property(x => x.Kontragent)
+            builder.Property(x => x.SF_POSTAV_NUM).AutoGenerated()
+                .DisplayName("Внешний №");
+            builder.Property(x => x.SF_IN_NUM).AutoGenerated()
+                .DisplayName("№");
+            builder.Property(x => x.SF_POSTAV_DATE).AutoGenerated()
+                .DisplayName("Дата");
+            builder.Property(x => x.Kontragent).AutoGenerated()
                 .DisplayName("Контрагент");
@@ -1124,6 +1114,3 @@
                 .DisplayName("Контрагент");
-
-
-
         }
     }
