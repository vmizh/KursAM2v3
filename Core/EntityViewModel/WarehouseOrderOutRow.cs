using System.ComponentModel.DataAnnotations;
using Core.Helper;
using Data;
using DevExpress.Mvvm.DataAnnotations;

namespace Core.EntityViewModel
{
    /// <summary>
    ///     Расходный складской ордер - строка
    /// </summary>
    [MetadataType(typeof(DataAnnotationsWarehouseStorageOrderOutRow))]
    public class WarehouseOrderOutRow : TD_24ViewModel
    {
        public WarehouseOrderOutRow()
        {
        }

        public WarehouseOrderOutRow(TD_24 entity) : base(entity)
        {
        }

        public string NomNomenkl => Nomenkl.NOM_NOMENKL;
        public bool Taksirovka => DDT_TAX_EXECUTED == 1;
        public bool Factur => DDT_FACT_EXECUTED == 1;
    }

    public class DataAnnotationsWarehouseStorageOrderOutRow : DataAnnotationForFluentApiBase,
        IMetadataProvider<WarehouseOrderOutRow>
    {
        void IMetadataProvider<WarehouseOrderOutRow>.BuildMetadata(
            MetadataBuilder<WarehouseOrderOutRow> builder)
        {
            SetNotAutoGenerated(builder);
            builder.Property(_ => _.NomNomenkl).AutoGenerated().DisplayName("Номенклатурный номер");
            builder.Property(_ => _.Nomenkl).AutoGenerated().DisplayName("Наименование материала");
            builder.Property(_ => _.DDT_KOL_PRIHOD).AutoGenerated().DisplayName("Кол-во поставки");
            builder.Property(_ => _.Taksirovka).AutoGenerated().DisplayName("Таксировка выполнена");
            builder.Property(_ => _.Factur).AutoGenerated().DisplayName("Фактурирование выполнено");
        }
    }
}